---
import type { Language } from '../i18n/index';
import { t } from '../i18n/translations';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  lang: Language;
}

const { title, description, pubDate, slug, lang } = Astro.props;
const translate = t(lang);

// 构建博客详情页链接
const blogUrl = lang === 'en' ? `/blog/${slug}` : `/${lang}/blog/${slug}`;

// 格式化日期
const formattedDate = pubDate.toLocaleDateString(lang === 'zh-cn' ? 'zh-CN' : lang === 'zh-tw' ? 'zh-TW' : lang, {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<article class="bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden border border-gray-200 dark:border-gray-700">
  <a href={blogUrl} class="block p-6 group">
    <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-3">
      <time datetime={pubDate.toISOString()}>
        {formattedDate}
      </time>
    </div>
    
    <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
      {title}
    </h2>
    
    <p class="text-gray-600 dark:text-gray-300 line-clamp-3 mb-4">
      {description}
    </p>
    
    <span class="inline-flex items-center text-blue-600 dark:text-blue-400 font-medium group-hover:gap-2 transition-all">
      {translate('blog.readMore')}
      <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </span>
  </a>
</article>

